{% extends "base/base_auth.html" %}
{% load static %}

{% block title %} Registro {% endblock %}

{% block content %}
<!-- Contenedor principal fluido sin padding -->
<div class="container-fluid p-0">
    <!-- Fila sin gutters (espacios entre columnas) -->
    <div class="row g-0">
        <!-- Lado izquierdo - Imagen de fondo (visible solo en dispositivos medianos y grandes) -->
        <div class="col-md-6 bg-image d-none d-md-block">
            <!-- Capa superpuesta con texto sobre la imagen -->
            <div class="image-overlay">
                <h2>¡Únete a nosotros!</h2>
                <p>Crea tu cuenta y descubre un mundo de posibilidades al alcance de un click</p>
            </div>
        </div>
        
        <!-- Lado derecho - Formulario de registro -->
        <div class="col-md-6 form-container">
            <!-- Enlace para volver a la página de inicio -->
            <a href="{% url 'core:inicio' %}" class="back-home">
                <i class="bi bi-arrow-left"></i>
                Inicio
            </a>
            <!-- Contenedor del logo y texto de bienvenida -->
            <div class="logo-text">
                <span class="welcome-text">Bienvenid@s a</span>
                <div class="logo">
                    <span class="logo-icon">
                        <i class="fas fa-chevron-right"></i>
                    </span>
                    CLICK ON
                </div>
            </div>
            
            <!-- Texto descriptivo del formulario -->
            <p class="subtitle">Por favor complete sus datos a continuación para crear su cuenta</p>
            
            <!-- Formulario de registro con ID para JavaScript -->
            <form method="post" action="{% url 'usuarios:registro' %}" id="registroForm" novalidate>
                {% csrf_token %}
                
                <!-- Display form errors if any -->
                {% if form.errors %}
                <div class="alert alert-danger">
                    <ul>
                        {% for field in form %}
                            {% for error in field.errors %}
                                <li>{{ field.label }}: {{ error }}</li>
                            {% endfor %}
                        {% endfor %}
                        {% for error in form.non_field_errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}
                
                <!-- Username field -->
                <div class="mb-3">
                    <label for="username" class="form-label">Nombre de Usuario</label>
                    <input type="text" class="form-control" id="username" name="username" 
                           placeholder="Ingresa tu nombre de usuario" required
                           pattern=".{4,}" title="El nombre de usuario debe tener al menos 4 caracteres">
                    <small class="form-text text-muted">El nombre de usuario debe tener al menos 4 caracteres.</small>
                </div>
                
                <!-- Email field -->
                <div class="mb-3">
                    <label for="email" class="form-label">Correo Electrónico</label>
                    <input type="email" class="form-control" id="email" name="email" 
                           placeholder="Ingresa tu correo electrónico" required>
                    <small class="form-text text-muted">Ingresa un correo electrónico válido.</small>
                </div>
                
                <!-- First name field -->
                <div class="mb-3">
                    <label for="first_name" class="form-label">Nombre</label>
                    <input type="text" class="form-control" id="first_name" name="first_name" 
                           placeholder="Ingresa tu nombre" required
                           pattern=".{2,}" title="Por favor ingresa tu nombre completo">
                </div>
                
                <!-- Last name field -->
                <div class="mb-3">
                    <label for="last_name" class="form-label">Apellido</label>
                    <input type="text" class="form-control" id="last_name" name="last_name" 
                           placeholder="Ingresa tu apellido" required
                           pattern=".{2,}" title="Por favor ingresa tu apellido completo">
                </div>
                
                <!-- Phone field -->
                <div class="mb-3">
                    <label for="phone" class="form-label">Número de Teléfono</label>
                    <input type="tel" class="form-control" id="phone" name="phone" 
                           placeholder="Ingresa tu número de teléfono" required
                           pattern="[0-9]{10}" title="Ingresa un número de teléfono válido (10 dígitos)">
                    <small class="form-text text-muted">Formato: 10 dígitos sin espacios ni guiones.</small>
                </div>
                
                <!-- Password field with strength meter -->
                <div class="mb-3">
                    <label for="password1" class="form-label">Contraseña</label>
                    <div class="password-container">
                        <input type="password" class="form-control" id="password1" name="password1" 
                               placeholder="Crear una contraseña" required
                               pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" 
                               title="La contraseña debe tener al menos 8 caracteres, incluyendo mayúsculas, minúsculas y números">
                        <span class="password-toggle" onclick="togglePassword('password1')">
                            <i class="bi bi-eye" id="toggleIcon1"></i>
                        </span>
                    </div>
                    <small class="form-text text-muted">La contraseña debe tener al menos 8 caracteres, incluyendo mayúsculas, minúsculas y números.</small>
                    
                    <!-- Password strength meter -->
                    <div class="password-strength-container mt-2">
                        <div class="progress" style="height: 5px;">
                            <div id="password-strength" class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Confirm password field -->
                <div class="mb-3">
                    <label for="password2" class="form-label">Confirmar Contraseña</label>
                    <div class="password-container">
                        <input type="password" class="form-control" id="password2" name="password2" 
                               placeholder="Confirmar contraseña" required>
                        <span class="password-toggle" onclick="togglePassword('password2')">
                            <i class="bi bi-eye" id="toggleIcon2"></i>
                        </span>
                    </div>
                    <small class="form-text text-muted">Repite la contraseña exactamente igual.</small>
                </div>
                
                <!-- Terms checkbox -->
                <div class="mb-4">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="terms" required>
                        <label class="form-check-label" for="terms">
                            Acepto los <a href="#" class="text-decoration-none">Términos de servicio</a> y reconozco que he leído nuestra <a href="#" class="text-decoration-none">Política de privacidad</a>.
                        </label>
                    </div>
                </div>
                
                <!-- Submit button -->
                <button type="submit" class="btn btn-primary login-btn w-100">Crear Una Cuenta</button>
            </form>
            
            <!-- Enlace para iniciar sesión si ya tiene cuenta -->
            <div class="signup-link">
                <p>¿Ya tienes una cuenta? <a href="{% url 'usuarios:sesion' %}">Inicia Sesión</a></p>
            </div>
            
            <!-- Divisor entre opciones de registro -->
            <div class="divider">O</div>
            
            <!-- Botones para registro con redes sociales -->
            <div class="social-icons">
                <!-- Botón para registro con Google -->
                <a href="#" class="social-btn google-btn">
                    <img src="{% static 'img/google.png' %}" alt="Google">
                    <span>Continuar con Google</span>
                </a>
                <!-- Botón para registro con Facebook -->
                <a href="#" class="social-btn facebook-btn">
                    <img src="{% static 'img/facebook.png' %}" alt="Facebook">
                    <span>Continuar con Facebook</span>
                </a>
            </div>
        </div>
    </div>
</div>
<!-- Script para validaciones del lado del cliente -->
<script src="{% static 'js/auth.js' %}"></script>
{% endblock %}
{% load static %}
<!-- Banner de promociones -->
<div class="promo-banner py-2 container">
    <div class="d-flex align-items-center justify-content-between">
        <div class="marquee-container">
            <p class="marquee-content">
                ¡Oferta del día! (Va mostrar la mejor oferta) se movera como anuncios de noticias
            </p>
        </div>
        <div class="mascot">
            <img src="{% static "img/hamburguesa.webp" %}" 
                alt="Mascot" class="mascot-img">
        </div>
    </div>
</div>

<!-- Logo -->
<div class="navbar-brand">
    <div class="logo-container d-flex align-items-center">
        <!-- Botón hamburguesa -->
        <a class="hamburger-icon d-xl-none" id="hamburgerMenuToggle">
            <!-- Icono hamburguesa -->
            <span class="hamburger-1"></span>
            <span class="hamburger-2"></span>
            <span class="hamburger-3"></span>
        </a>
        <!-- Logo -->
        <div class="logo d-flex align-items-center">
            <p class="click">Click</p>
            <p class="on">On</p>
        </div>
    </div>
</div>            

<!-- Main Header -->
<div class="main-header container d-flex align-items-center">
    <div class="container-xxl">
        <nav class="navbar navbar-expand-xl">
            <div class="container-fluid p-0 d-flex justify-content-end">
                <!-- Navigation Content -->
                    <ul id="navbar" class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                                Categorías
                            </a>
                            <ul class="dropdown-menu">
                                <li class="dropdown-submenu">
                                    <a class="dropdown-item dropdown-toggle" href="#">Comida rápida</a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#">Hamburguesas</a></li>
                                        <li><a class="dropdown-item" href="#">Pizzas</a></li>
                                        <li><a class="dropdown-item" href="#">Hot dogs</a></li>
                                        <li><a class="dropdown-item" href="#">Snacks salados</a></li>
                                    </ul>
                                </li>
                                <li class="dropdown-submenu">
                                    <a class="dropdown-item dropdown-toggle" href="#">Comida saludable</a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#">Ensaladas</a></li>
                                        <li><a class="dropdown-item" href="#">Jugos</a></li>
                                        <li><a class="dropdown-item" href="#">Snacks saludables</a></li>
                                    </ul>
                                </li>
                                <li class="dropdown-submenu">
                                    <a class="dropdown-item dropdown-toggle" href="#">Bebidas</a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#">Refrescos y sodas</a></li>
                                        <li><a class="dropdown-item" href="#">Jugos</a></li>
                                        <li><a class="dropdown-item" href="#">Café y té</a></li>
                                        <li><a class="dropdown-item" href="#">Bebidas energéticas</a></li>
                                        <li><a class="dropdown-item" href="#">Leche y bebidas vegetables</a></li>
                                    </ul>
                                </li>
                                <li class="dropdown-submenu">
                                    <a class="dropdown-item dropdown-toggle" href="#">Postres</a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#">Pasteles y tartas</a></li>
                                        <li><a class="dropdown-item" href="#">Galletas y panadería</a></li>
                                        <li><a class="dropdown-item" href="#">Helados y postres</a></li>
                                    </ul>
                                </li>
                                <li class="dropdown-submenu">
                                    <a class="dropdown-item dropdown-toggle" href="#">Despensa y congelados</a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#">Comida congelada</a></li>
                                        <li><a class="dropdown-item" href="#">Enlatados</a></li>
                                        <li><a class="dropdown-item" href="#">Cereales y barras</a></li>
                                        <li><a class="dropdown-item" href="#">Salsas y condimentos</a></li>
                                        <li><a class="dropdown-item" href="#">Pasta y arroz</a></li>
                                    </ul>
                                </li>
                                <li class="dropdown-submenu">
                                    <a class="dropdown-item dropdown-toggle" href="#">Dietas especiales</a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#">Vegetariana</a></li>
                                        <li><a class="dropdown-item" href="#">Sin glúten</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                                Servicios
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#">Convierte en repartidor</a></li>
                                <li><a class="dropdown-item" href="#">Registrar mi negocio</a></li>
                                <li><a class="dropdown-item" href="#">FAQ</a></li>
                                <li><a class="dropdown-item" href="#">Solución de problemas</a></li>
                            </ul>
                        </li>
                    </ul>

                <!-- Search, Cart and Auth Buttons -->
                <div id="busqueda-carrito-login" class="d-flex align-items-center gap-2">
                    <form class="search-form d-flex">
                        <input class="input-control" placeholder="Buscar" >
                        <button class="search-btn p-0" type="submit">
                            <i class="bi bi-search"></i>
                        </button>
                    </form>
                    <div class="cart-container">
                        <a href="#" class="cart-link">
                            <i class="bi bi-cart-fill"></i>
                            <span class="cart-badge">1</span>
                        </a>
                    </div>
                    
<!-- Botones de autenticación para pantallas grandes -->
<div class="auth-buttons d-flex gap-2 d-none d-lg-flex">
    <!-- En la sección del navbar donde muestras la información del usuario -->
    {% if user.is_authenticated %}
        <div class="nav-item dropdown">
            <a class="nav-link dropdown-toggle user-profile-link d-flex align-items-center" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <div class="avatar-container me-2">
                    <img src="{% static 'img/default-avatar.png' %}" alt="Avatar" class="rounded-circle user-avatar" width="36" height="36">
                    {% if user.rol_usuario == '4' %}
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger admin-badge">
                        <i class="bi bi-star-fill"></i>
                    </span>
                    {% endif %}
                </div>
                <div class="user-info">
                    <span class="user-name">{{ user.get_full_name }}</span>
                    <small class="user-role d-block text-muted">
                        {% if user.rol_usuario == '4' %}
                            Administrador
                        {% elif user.rol_usuario == '3' %}
                            Gerente
                        {% elif user.rol_usuario == '2' %}
                            Negocio
                        {% else %}
                            Cliente
                        {% endif %}
                    </small>
                </div>
            </a>
            <ul class="dropdown-menu dropdown-menu-end user-dropdown" aria-labelledby="navbarDropdown">
                <li class="dropdown-header text-center">
                    <img src="{% static 'img/default-avatar.png' %}" alt="Avatar" class="rounded-circle mb-2" width="60" height="60">
                    <h6 class="mb-0">{{ user.get_full_name }}</h6>
                    <small>{{ user.email }}</small>
                </li>
                <li><hr class="dropdown-divider"></li>
                
                {% if user.rol_usuario == '4' %}
                    <li>
                        <a class="dropdown-item d-flex align-items-center" href="#">
                            <i class="bi bi-speedometer2 me-2 text-success"></i>
                            Panel Administrativo
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item d-flex align-items-center" href="#">
                            <i class="bi bi-shop me-2 text-success"></i>
                            Administrar Negocios
                        </a>
                    </li>
                {% elif user.rol_usuario == '2' or user.rol_usuario == '3' %}
                    <li>
                        <a class="dropdown-item d-flex align-items-center" href="#">
                            <i class="bi bi-shop me-2 text-success"></i>
                            Administrar Negocio
                        </a>
                    </li>
                {% endif %}
                
                <li>
                    <a class="dropdown-item d-flex align-items-center" href="#">
                        <i class="bi bi-person-circle me-2 text-success"></i>
                        Mi Cuenta
                    </a>
                </li>
                <li>
                    <a class="dropdown-item d-flex align-items-center" href="#">
                        <i class="bi bi-cart-check me-2 text-success"></i>
                        Mis Pedidos
                    </a>
                </li>
                <li>
                    <a class="dropdown-item d-flex align-items-center" href="#">
                        <i class="bi bi-heart me-2 text-success"></i>
                        Favoritos
                    </a>
                </li>
                <li><hr class="dropdown-divider"></li>
                <li>
                    <form method="post" action="{% url 'usuarios:logout' %}">
                        {% csrf_token %}
                        <button type="submit" class="dropdown-item d-flex align-items-center">
                            <i class="bi bi-box-arrow-right me-2 text-danger"></i>
                            Cerrar Sesión
                        </button>
                    </form>
                </li>
            </ul>
        </div>
    {% else %}                            
        <a href="{% url 'usuarios:sesion' %}" class="btn btn-login">Iniciar Sesión</a>
        <a href="{% url 'usuarios:registro' %}" class="btn btn-register m-auto">Registrarse</a>
    {% endif %}
</div>
            </div>
        </nav>
    </div>
</div>

<div id="hamburgerMenu" class="hamburger-menu d-none">
    <ul id="navbar-hamburger" class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
            <!-- Botón para colapsar el menú de Categorías -->
            <a class="nav-link" data-bs-toggle="collapse" 
                href="#categoriasMenu" role="button" aria-expanded="false" 
                aria-controls="categoriasMenu">
                Categorías
                <i class="bi bi-caret-right-fill"></i>
            </a>
            <div class="collapse" id="categoriasMenu">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link submenu" data-bs-toggle="collapse" href="#comidaRapida" role="button" aria-expanded="false" aria-controls="comidaRapida">
                            Comida rápida
                            <i class="bi bi-caret-right-fill"></i>
                        </a>
                        <div class="collapse" id="comidaRapida">
                            <ul class="navbar-nav">
                                <li class="nav-item"><a class="nav-link subsubmenu" href="#">Hamburguesas</a></li>
                                <li class="nav-item"><a class="nav-link subsubmenu" href="#">Pizzas</a></li>
                                <li class="nav-item"><a class="nav-link subsubmenu" href="#">Hot dogs</a></li>
                                <li class="nav-item"><a class="nav-link subsubmenu" href="#">Snacks salados</a></li>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link submenu" data-bs-toggle="collapse" href="#comidaSaludable" role="button" aria-expanded="false" aria-controls="comidaSaludable">
                            Comida saludable
                            <i class="bi bi-caret-right-fill"></i>
                        </a>
                        <div class="collapse" id="comidaSaludable">
                            <ul class="navbar-nav">
                                <li class="nav-item"><a class="nav-link subsubmenu" href="#">Ensaladas</a></li>
                                <li class="nav-item"><a class="nav-link subsubmenu" href="#">Jugos</a></li>
                                <li class="nav-item"><a class="nav-link subsubmenu" href="#">Snacks saludables</a></li>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link submenu" data-bs-toggle="collapse" href="#bebidas" role="button" aria-expanded="false" aria-controls="bebidas">
                            Bebidas
                            <i class="bi bi-caret-right-fill"></i>
                        </a>
                        <div class="collapse" id="bebidas">
                            <ul class="navbar-nav">
                                <li class="nav-item"><a class="nav-link subsubmenu" href="#">Refrescos y sodas</a></li>
                                <li class="nav-item"><a class="nav-link subsubmenu" href="#">Jugos</a></li>
                                <li class="nav-item"><a class="nav-link subsubmenu" href="#">Café y té</a></li>
                                <li class="nav-item"><a class="nav-link subsubmenu" href="#">Bebidas energéticas</a></li>
                                <li class="nav-item"><a class="nav-link subsubmenu" href="#">Leche y bebidas vegetales</a></li>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link submenu" data-bs-toggle="collapse" href="#postres" role="button" aria-expanded="false" aria-controls="postres">
                            Postres
                            <i class="bi bi-caret-right-fill"></i>
                        </a>
                        <div class="collapse" id="postres">
                            <ul class="navbar-nav">
                                <li class="nav-item"><a class="nav-link subsubmenu" href="#">Pasteles y tartas</a></li>
                                <li class="nav-item"><a class="nav-link subsubmenu" href="#">Galletas y panadería</a></li>
                                <li class="nav-item"><a class="nav-link subsubmenu" href="#">Helados y postres</a></li>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link submenu" data-bs-toggle="collapse" href="#despensa" role="button" aria-expanded="false" aria-controls="despensa">
                            Despensa y congelados
                            <i class="bi bi-caret-right-fill"></i>
                        </a>
                        <div class="collapse" id="despensa">
                            <ul class="navbar-nav">
                                <li class="nav-item"><a class="nav-link subsubmenu" href="#">Comida congelada</a></li>
                                <li class="nav-item"><a class="nav-link subsubmenu" href="#">Enlatados</a></li>
                                <li class="nav-item"><a class="nav-link subsubmenu" href="#">Cereales y barras</a></li>
                                <li class="nav-item"><a class="nav-link subsubmenu" href="#">Salsas y condimentos</a></li>
                                <li class="nav-item"><a class="nav-link subsubmenu" href="#">Pasta y arroz</a></li>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link submenu" data-bs-toggle="collapse" href="#dietas" role="button" aria-expanded="false" aria-controls="dietas">
                            Dietas especiales
                            <i class="bi bi-caret-right-fill"></i>
                        </a>
                        <div class="collapse" id="dietas">
                            <ul class="navbar-nav">
                                <li class="nav-item"><a class="nav-link subsubmenu" href="#">Vegetariana</a></li>
                                <li class="nav-item"><a class="nav-link subsubmenu" href="#">Sin glúten</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
        </li>
        <li class="nav-item">
            <!-- Botón para colapsar el menú de Servicios -->
            <a class="nav-link" data-bs-toggle="collapse" 
                href="#serviciosMenu" role="button" aria-expanded="false" 
                aria-controls="serviciosMenu">
                Servicios
                <i class="bi bi-caret-right-fill"></i>
            </a>
            <div class="collapse" id="serviciosMenu">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link submenu" href="#">Convierte en repartidor</a></li>
                    <li class="nav-item"><a class="nav-link submenu" href="#">Registrar mi negocio</a></li>
                    <li class="nav-item"><a class="nav-link submenu" href="#">FAQ</a></li>
                    <li class="nav-item"><a class="nav-link submenu" href="#">Solución de problemas</a></li>
                </ul>
            </div>
        </li>
        
        <!-- Opciones de autenticación para el menú hamburguesa -->
        {% if user.is_authenticated %}
            {% if user.rol_usuario == '4' %}
                <li class="nav-item">
                    <a class="nav-link" href="">
                        Panel Administrativo
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">
                        Administrar Negocios
                    </a>
                </li>
            {% elif user.rol_usuario == '2' or user.rol_usuario == '3' %}
                <li class="nav-item">
                    <a class="nav-link" href="#">
                        Administrar Negocio
                    </a>
                </li>
            {% endif %}
            <li class="nav-item">
                <a class="nav-link" href="#">
                    Mi Cuenta
                </a>
            </li>
            <li class="nav-item">
                <form method="post" action="{% url 'usuarios:logout' %}">
                    {% csrf_token %}
                    <button type="submit" class="nav-link border-0 bg-transparent">Cerrar Sesión</button>
                </form>
            </li>            
            <li class="nav-item">
                <a class="nav-link" href="#">
                    Mi Cuenta
                </a>
            </li>
            <li class="nav-item">
                <form method="post" action="{% url 'usuarios:logout' %}">
                    {% csrf_token %}
                    <button type="submit" class="nav-link border-0 bg-transparent">Cerrar Sesión</button>
                </form>
            </li>
        {% else %}
            <li class="nav-item">
                <a class="nav-link" href="{% url 'usuarios:sesion' %}">
                    Iniciar Sesión
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'usuarios:registro' %}">
                    Registrarse
                </a>
            </li>
        {% endif %}
    </ul>
</div>